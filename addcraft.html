<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Add Craft</title>
    <style>
        #itemTable {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }
        #itemTable th, #itemTable td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        #itemTable th {
            background-color: #4CAF50;
            color: white;
        }
        #itemTable tr:hover {
            background-color: #f5f5f5;
        }
        .select-checkbox {
            cursor: pointer;
        }
        .selected-items {
            margin-top: 15px;
            padding: 10px;
            background-color: #f9f9f9;
            border: 1px solid #ddd;
        }
    </style>
</head>

<body>
    <h1>Add Craft</h1>
    <form id="frmAddProduct" action="./summary.html" method="get">
        <label id="lblcraftcode" for="code">Craft Code:</label><br>
        <input type="number" id="code" name="code" placeholder="Enter the craft code" required><br><br>
        <label id="lblcraftname">Craft name:</label><br>
        <input type="text" id="name" name="name" placeholder="Enter the craft name" required><br><br>
        <label id="lblcategory" for="ddlcategory">Work Category:</label><br>
        <select id="ddlcategory" name="ddlcategory" required>
            <option value="">Select a category</option>
            <option value="Woodwork">Woodwork</option>
            <option value="Metalwork">Metalwork</option>
            <option value="Textiles">Textiles</option>
            <option value="Ceramics">Ceramics</option>
        </select><br><br>
        <label id="lblselection" for="ddlselection">Selection</label><br>
        <select id="ddlselection" name="ddlselection" required>
            <option value="">Select a selection</option>
            <option value="Handmade">Handmade</option>
            <option value="Machine-made">Machine-made</option>
        </select><br><br>
        <label id="lbllocation" for="location">Location:</label><br>
        <input type="text" id="location" name="location" placeholder="Enter the location" required><br><br>
        <label id="lblEstimatedstart" for="Estimatedstart">Estimated start:</label><br>
        <input type="date" id="Estimatedstart" name="Estimatedstart" required><br><br>
        <label id="lblEstimatedend" for="Estimatedend">Estimated end:</label><br>
        <input type="date" id="Estimatedend" name="Estimatedend" required><br><br>
        <label id="lblstatus" for="ddlstatus">Status:</label><br>
        <select id="ddlstatus" name="ddlstatus" required>
            <option value="">Select a status</option>
            <option value="Not Started">Not Started</option>
            <option value="In Progress">In Progress</option>
            <option value="Completed">Completed</option>
        </select><br><br>
        <h1>Technical Details</h1>
        <label id="lbltechnicaldetails" for="technicaldetails">Technical Details:</label><br>
        <textarea id="technicaldetails" name="technicaldetails" placeholder="Enter technical details here"
            ></textarea><br><br>
        <label id="lblDescription" for="description">Description:</label><br>
        <input type="text" id="description" name="description" placeholder="Enter a summary of the craft details"
            required><br><br>
        <h1>Drawing reference</h1>
        <label id="lbldrawingreference" for="drawingreference">Drawing reference:</label><br>
        <img src="images/drawing-reference.jpg" alt="Drawing Reference"><br><br>
        
        <h1>Item Association</h1>
        <label id="lblitem" for="searchItem">Search Items:</label><br>
        <input type="search" id="searchItem" name="searchItem" placeholder="Search by item name or code" onkeyup="filterTable()" required><br><br>
        
        <table id="itemTable">
            <thead>
                <tr>
                    <th>Select</th>
                    <th>Item ID</th>
                    <th>Item Name</th>
                    <th>Category</th>
                    <th>Quantity</th>
                </tr>
            </thead>
            <tbody id="tableBody">
                <tr>
                    <td><input type="checkbox" class="select-checkbox" value="1"></td>
                    <td>1001</td>
                    <td>Wood Block</td>
                    <td>Materials</td>
                    <td>50</td>
                </tr>
                <tr>
                    <td><input type="checkbox" class="select-checkbox" value="2"></td>
                    <td>1002</td>
                    <td>Metal Rod</td>
                    <td>Materials</td>
                    <td>30</td>
                </tr>
                <tr>
                    <td><input type="checkbox" class="select-checkbox" value="3"></td>
                    <td>1003</td>
                    <td>Textile Fabric</td>
                    <td>Materials</td>
                    <td>100</td>
                </tr>
                <tr>
                    <td><input type="checkbox" class="select-checkbox" value="4"></td>
                    <td>1004</td>
                    <td>Clay Batch</td>
                    <td>Materials</td>
                    <td>20</td>
                </tr>
                <tr>
                    <td><input type="checkbox" class="select-checkbox" value="5"></td>
                    <td>1005</td>
                    <td>Drill Machine</td>
                    <td>Tools</td>
                    <td>5</td>
                </tr>
            </tbody>
        </table>
        
        <div class="selected-items">
            <h3>Selected Items:</h3>
            <input type="hidden" id="selectedItems" name="selectedItems">
            <div id="selectedItemsList">No items selected</div>
        </div><br>
        
        <input type="submit" id="btnSubmit" value="Submit">
    </form>

    <script>
        // Filter table based on search input
        function filterTable() {
            const searchValue = document.getElementById('searchItem').value.toLowerCase();
            const tableRows = document.querySelectorAll('#tableBody tr');
            
            tableRows.forEach(row => {
                const itemName = row.cells[2].textContent.toLowerCase();
                const itemId = row.cells[1].textContent.toLowerCase();
                
                if (itemName.includes(searchValue) || itemId.includes(searchValue)) {
                    row.style.display = '';
                } else {
                    row.style.display = 'none';
                }
            });
        }
        
        // Handle checkbox selection
        document.querySelectorAll('.select-checkbox').forEach(checkbox => {
            checkbox.addEventListener('change', updateSelectedItems);
        });
        
        function updateSelectedItems() {
            const selectedCheckboxes = document.querySelectorAll('.select-checkbox:checked');
            const selectedItems = [];
            let selectedItemsList = '';
            
            selectedCheckboxes.forEach(checkbox => {
                const row = checkbox.closest('tr');
                const itemId = row.cells[1].textContent;
                const itemName = row.cells[2].textContent;
                
                selectedItems.push({
                    id: itemId,
                    name: itemName
                });
                
                selectedItemsList += `<p>â€¢ ${itemName} (ID: ${itemId})</p>`;
            });
            
            // Update the hidden field with selected items
            document.getElementById('selectedItems').value = JSON.stringify(selectedItems);
            
            // Update the display
            const listDiv = document.getElementById('selectedItemsList');
            if (selectedItemsList === '') {
                listDiv.innerHTML = 'No items selected';
            } else {
                listDiv.innerHTML = selectedItemsList;
            }
        }
    </script>
</body>

</html>